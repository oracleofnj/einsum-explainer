(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){},17:function(e,n,t){},20:function(e,n,t){"use strict";t.r(n);var r,a,i=t(4),o=t.n(i),u=t(6),c=t(0),s=t.n(c),l=t(7),p=t.n(l),f=(t(16),t(3)),d=t(2),m={},h=0,v=new TextEncoder("utf-8"),y=null;function g(){return null!==y&&y.buffer===r.memory.buffer||(y=new Uint8Array(r.memory.buffer)),y}a="function"===typeof v.encodeInto?function(e){for(var n=e.length,t=r.__wbindgen_malloc(n),a=0;;){var i=g().subarray(t+a,t+n),o=v.encodeInto(e,i),u=o.read;if(a+=o.written,u===e.length)break;e=e.substring(u),t=r.__wbindgen_realloc(t,n,n+=3*e.length)}return h=a,t}:function(e){var n=v.encode(e),t=r.__wbindgen_malloc(n.length);return g().set(n,t),h=n.length,t};var b=new TextDecoder("utf-8");function O(e,n){return b.decode(g().subarray(e,e+n))}var E=null;function w(){return null===E&&(E=r.__wbindgen_global_argument_ptr()),E}var S=null;function _(){return null!==S&&S.buffer===r.memory.buffer||(S=new Uint32Array(r.memory.buffer)),S}function A(e){var n=a(e),t=h,i=w();try{r.validateAsJson(i,n,t);var o=_(),u=o[i/4],c=o[i/4+1],s=O(u,c).slice();return r.__wbindgen_free(u,1*c),s}finally{r.__wbindgen_free(n,1*t)}}function J(e,n){var t=a(e),i=h,o=a(n),u=h,c=w();try{r.validateAndSizeFromShapesAsStringAsJson(c,t,i,o,u);var s=_(),l=s[c/4],p=s[c/4+1],f=O(l,p).slice();return r.__wbindgen_free(l,1*p),f}finally{r.__wbindgen_free(t,1*i),r.__wbindgen_free(o,1*u)}}function k(e,n){var t=a(e),i=h,o=a(n),u=h,c=w();try{r.slowEinsumAsJson(c,t,i,o,u);var s=_(),l=s[c/4],p=s[c/4+1],f=O(l,p).slice();return r.__wbindgen_free(l,1*p),f}finally{r.__wbindgen_free(t,1*i),r.__wbindgen_free(o,1*u)}}m.validateAsJson=A,m.validateAndSizeFromShapesAsStringAsJson=J,m.slowEinsumAsJson=k;var C=new Array(32);C.fill(void 0),C.push(void 0,null,!0,!1);var j=C.length;m.__wbindgen_object_drop_ref=function(e){var n;(n=e)<36||(C[n]=j,j=n)};var N=function e(n){var t,a={"./einsum":m};if(n instanceof URL||"string"===typeof n||n instanceof Request){var i=fetch(n);t="function"===typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(i,a).catch(function(e){return console.warn("`WebAssembly.instantiateStreaming` failed. Assuming this is because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),i.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,a)})}):i.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,a)})}else t=WebAssembly.instantiate(n,a).then(function(e){return e instanceof WebAssembly.Instance?{instance:e,module:n}:e});return t.then(function(n){var t=n.instance,a=n.module;return r=t.exports,e.__wbindgen_wasm_module=a,r})},z=t(1);function q(e){return e.hasOwnProperty("Err")}function x(e){return e instanceof Array&&e.every(function(e){return"number"===typeof e})}function P(e){if("number"===typeof e)return{Ok:[]};var n=P(e[0]);if(q(n))return n;for(var t=function(t){var r=P(e[t]);return q(r)?{v:r}:n.Ok.every(function(e,n){return r.Ok[n]===e})?void 0:{v:{Err:"Array contains elements with different shapes"}}},r=1;r<e.length;r++){var a=t(r);if("object"===typeof a)return a.v}return{Ok:[e.length].concat(Object(z.a)(n.Ok))}}function T(e){return!!function e(n){if("number"===typeof n)return!0;if(!(n instanceof Array))return!1;if(x(n)&&0!==n.length)return!0;var t=n[0];if(!(t instanceof Array)||0===t.length)return!1;var r=t.length;return 0!==r&&n.every(function(n){return n instanceof Array&&n.length===r&&e(n)})}(e)&&!q(P(e))}function F(e){return e.hasOwnProperty("operand_indices")&&e.operand_indices instanceof Array&&e.hasOwnProperty("output_indices")&&e.hasOwnProperty("summation_indices")}function W(e){return e.hasOwnProperty("contraction")&&F(e.contraction)&&e.hasOwnProperty("output_size")&&function(e){return Object.entries(e).every(function(e){var n=Object(f.a)(e,2);return n[0],"number"===typeof n[1]})}(e.output_size)}function M(e){return e.hasOwnProperty("shape")&&x(e.shape)&&e.hasOwnProperty("contents")&&x(e.contents)}function I(e,n,t){var r;try{r=JSON.parse(e)}catch(a){return{Err:"".concat(t," returned invalid JSON")}}return function(e,n,t){return function(e,n){return e.hasOwnProperty("Ok")&&n(e.Ok)}(e,n)?e:q(e)?e:t}(r,n,{Err:"".concat(t," returned valid JSON but of the wrong type")})}var V=function(e){return"updateEquation"===e.type&&e.hasOwnProperty("equation")&&"string"===typeof e.equation},B={type:"updateEquation",typeguard:V,actionCreator:function(e){return{type:"updateEquation",equation:e}},reducer:function(e,n){if(V(n)){var t=n.equation,r=e.visibleSizes,a=I(A(t),F,"validateAsJson");return q(a)||(r=a.Ok.operand_indices.length),Object(d.a)({},e,{visibleSizes:r,equation:n.equation})}throw new TypeError(JSON.stringify({action:n}))}};function R(e){var n,t=e.replace(/\(/g,"[").replace(/\)/g,"]");try{n=JSON.parse(t)}catch(r){return{Err:"Not a valid shape"}}return x(n)?{Ok:n}:{Err:"Not a valid shape"}}function U(e){return function e(n,t){switch(n.length){case 0:return t[0];case 1:return t.slice();default:for(var r=[],a=1,i=1;i<n.length;i++)a*=n[i];for(var o=0;o<n[0];o++)r.push(e(n.slice(1),t.slice(o*a,(o+1)*a)));return r}}(e.shape,e.contents)}var L="updateShape";function D(e){return e.type===L&&e.hasOwnProperty("index")&&"number"===typeof e.index&&e.hasOwnProperty("shape")&&"string"===typeof e.shape}var H={type:L,typeguard:D,actionCreator:function(e,n){return{type:L,index:e,shape:n}},reducer:function(e,n){if(D(n)){var t=n.index,r=n.shape,a=R(r);if(q(a))return Object(d.a)({},e,{operandShapes:[].concat(Object(z.a)(e.operandShapes.slice(0,t)),[r],Object(z.a)(e.operandShapes.slice(t+1)))});var i=function(e,n,t){var r=1,a=!0,i=!1,o=void 0;try{for(var u,c=t[Symbol.iterator]();!(a=(u=c.next()).done);a=!0)r*=u.value}catch(f){i=!0,o=f}finally{try{a||null==c.return||c.return()}finally{if(i)throw o}}var s=e[n];if(!(s instanceof Array))return Array(r).fill(0);for(var l=[],p=0;p<r;p++)"number"!==typeof s[p]?l.push(0):l.push(s[p]);return l}(e.operandVectors,t,a.Ok),o=U({shape:a.Ok,contents:i});return Object(d.a)({},e,{operandContents:[].concat(Object(z.a)(e.operandContents.slice(0,t)),[JSON.stringify(o)],Object(z.a)(e.operandContents.slice(t+1))),operandShapes:[].concat(Object(z.a)(e.operandShapes.slice(0,t)),[r],Object(z.a)(e.operandShapes.slice(t+1)))})}throw new TypeError(JSON.stringify({reducer:L,action:n}))}};function Y(e){var n,t=e.replace(/\(/g,"[").replace(/\)/g,"]");try{n=JSON.parse(t)}catch(r){return{Err:"Not a valid ndArray"}}return T(n)?{Ok:n}:{Err:"Not a valid ndArray"}}var $="updateContents";function G(e){return e.type===$&&e.hasOwnProperty("index")&&"number"===typeof e.index&&e.hasOwnProperty("contents")&&"string"===typeof e.contents}var K={type:$,typeguard:G,actionCreator:function(e,n){return{type:$,index:e,contents:n}},reducer:function(e,n){if(G(n)){var t=n.index,r=n.contents,a=Y(r);if(q(a))return Object(d.a)({},e,{operandContents:[].concat(Object(z.a)(e.operandContents.slice(0,t)),[r],Object(z.a)(e.operandContents.slice(t+1)))});var i=P(a.Ok);if(q(i))throw new Error("This shouldn't be possible");return Object(d.a)({},e,{operandContents:[].concat(Object(z.a)(e.operandContents.slice(0,t)),[r],Object(z.a)(e.operandContents.slice(t+1))),operandShapes:[].concat(Object(z.a)(e.operandShapes.slice(0,t)),[JSON.stringify(i.Ok).replace(/\[/g,"(").replace(/\]/g,")")],Object(z.a)(e.operandShapes.slice(t+1))),operandVectors:[].concat(Object(z.a)(e.operandVectors.slice(0,t)),[a.Ok.flat(Math.pow(2,16))],Object(z.a)(e.operandVectors.slice(t+1)))})}throw new TypeError(JSON.stringify({reducer:$,action:n}))}},Q=function(e){return"addShape"===e.type},X={type:"addShape",typeguard:Q,actionCreator:function(){return{type:"addShape"}},reducer:function(e,n){if(Q(n))return Object(d.a)({},e,{visibleSizes:e.visibleSizes+1});throw new TypeError(JSON.stringify({action:n}))}};function Z(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===t)throw new Error("range: step must not be zero");void 0===n&&(n=e,e=0);for(var r=[],a=e;a<n;)r.push(a),a+=t;return r}var ee={equation:"ij,jk->ik",visibleSizes:2,operandShapes:["(2,3)","(3,5)"].concat(Array(254).fill("()")),operandContents:[JSON.stringify([Z(3),Z(3,6)]),JSON.stringify([Z(0,50,10),Z(50,100,10),Z(100,150,10)])].concat(Array(254).fill("[]")),operandVectors:[Z(6),Z(0,150,10)].concat(Array(254).fill([]))},ne={addShape:X.actionCreator,updateEquation:B.actionCreator,updateShape:H.actionCreator,updateContents:K.actionCreator},te=function(e){var n={};return e.forEach(function(e){if(n[e.type])throw new Error("Multiple declarations for ".concat(e.type));n[e.type]=e.reducer}),function(e,t){return n[t.type](e,t)}}([X,B,H,K]),re=(t(17),s.a.memo(function(e){var n=e.equation,t=e.dispatch;return s.a.createElement("p",null,"Equation: ",s.a.createElement("input",{type:"text",onChange:function(e){t(ne.updateEquation(e.target.value))},value:n}))})),ae=t(8);t(18);var ie=function(e){var n="Out_{".concat(e.output_indices.join(","),"}"),t=e.summation_indices.map(function(e){return"\\sum_".concat(e)}).join(" "),r=e.operand_indices.map(function(e,n){var t="A".charCodeAt(0),r=String.fromCharCode(t+n),a=e.split("").join(",");return"".concat(r,"_{").concat(a,"}")}).join(" ");return"".concat(n," = ").concat(t," ").concat(r)},oe=function(e){var n,t,r=I(e.explanationJSON,F,"validateAsJson");if(q(r))n=r.Err;else{var a=r.Ok,i=ie(a);t={__html:Object(ae.renderToString)(i)}}return q(r)?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"There was an error!"),s.a.createElement("p",null,n)):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Everything is cool!"),s.a.createElement("div",{dangerouslySetInnerHTML:t}))};t(19);function ue(e){var n=e.input,t=e.output;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-12 col-md-6"},n),s.a.createElement("div",{className:"col-xs-12 col-md-6"},t))}var ce=s.a.memo(function(e){var n=e.equation,t=e.dispatch,r=A(n);return s.a.createElement(ue,{input:s.a.createElement(re,{equation:n,dispatch:t}),output:s.a.createElement(oe,{explanationJSON:r})})}),se=function(e){var n,t,r=e.equationJSON,a=e.sizedExplanationJSON,i=I(r,F,"validateAsJson"),o=I(a,W,"validateAndSizeFromShapesAsStringAsJson");if(q(o))n=o.Err;else if(q(i))n=i.Err;else{var u=i.Ok,c=o.Ok.output_size;t=s.a.createElement("div",null,s.a.createElement("div",null,"Output size: [",u.output_indices.join(", "),"] ="," ",JSON.stringify(u.output_indices.map(function(e){return c[e]}))),s.a.createElement("div",null,"Summation index lengths:"," ",u.summation_indices.map(function(e){return s.a.createElement("span",{key:e},e,": ",c[e])})))}return q(o)?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"The sizes don't work!"),s.a.createElement("p",null,n)):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"The operands match the input and the sizes check out!"),t)},le=s.a.memo(function(e){for(var n=e.operandShapes,t=e.visibleSizes,r=e.dispatch,a=[],i=0;i<t;i++)a.push(i<n.length?n[i]:"[]");var o=function(e){return function(n){r(ne.updateShape(e,n.target.value))}};return s.a.createElement("div",null,a.map(function(e,n){return s.a.createElement("div",{key:n},s.a.createElement("span",null,"Shape of ",String.fromCharCode(n+"A".charCodeAt(0)),":"," ",s.a.createElement("input",{type:"text",onChange:o(n),value:e})))}))}),pe=s.a.memo(function(e){var n,t=e.equation,r=e.visibleSizes,a=e.operandShapes,i=e.dispatch,o=A(t),u=a.slice(0,r).map(R);return n=u.some(q)?JSON.stringify({Err:JSON.stringify(u.filter(q))}):J(t,JSON.stringify(u.map(function(e){return e.Ok}))),s.a.createElement(ue,{input:s.a.createElement(le,{dispatch:i,visibleSizes:r,operandShapes:a}),output:s.a.createElement(se,{sizedExplanationJSON:n,equationJSON:o})})}),fe=function(e){var n,t,r=I(e.computationOutputJSON,M,"slowEinsumAsJson");return q(r)?n=r.Err:t=JSON.stringify(U(r.Ok),null,2),q(r)?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Something went wrong!"),s.a.createElement("div",null,n)):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Your computation is valid!"),s.a.createElement("div",null,"Einsum Result:"),s.a.createElement("div",null,t))},de=s.a.memo(function(e){for(var n=e.operandContents,t=e.visibleSizes,r=e.dispatch,a=[],i=0;i<t;i++)a.push(i<n.length?n[i]:"[]");var o=function(e){return function(n){r(ne.updateContents(e,n.target.value))}};return s.a.createElement("div",null,a.map(function(e,n){return s.a.createElement("div",{key:n},s.a.createElement("span",null,"Contents of ",String.fromCharCode(n+"A".charCodeAt(0)),":"," ",s.a.createElement("input",{type:"text",onChange:o(n),value:e})))}))}),me=s.a.memo(function(e){for(var n=e.equation,t=e.visibleSizes,r=e.operandShapes,a=e.operandContents,i=e.dispatch,o=r.slice(0,t),u=a.slice(0,t),c=[],l=0;l<Math.min(o.length,u.length);l++){var p=R(o[l]),f=Y(u[l]);q(p)||q(f)||"number"===typeof f.Ok?c.push({Err:"Array ".concat(l," doesn't work")}):c.push({shape:p.Ok,contents:f.Ok.flat(Math.pow(2,16))})}var d=k(n,JSON.stringify(c));return s.a.createElement(ue,{input:s.a.createElement(de,{dispatch:i,visibleSizes:t,operandContents:a}),output:s.a.createElement(fe,{computationOutputJSON:d})})}),he=function(){var e=Object(c.useReducer)(te,ee),n=Object(f.a)(e,2),t=n[0],r=n[1],a=t.equation,i=t.visibleSizes,o=t.operandContents,u=t.operandShapes;return s.a.createElement("div",{className:"wrap container-fluid"},s.a.createElement(ce,{equation:a,dispatch:r}),s.a.createElement(pe,{equation:a,dispatch:r,visibleSizes:i,operandShapes:u}),s.a.createElement(me,{equation:a,dispatch:r,visibleSizes:i,operandContents:o,operandShapes:u}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));!function(){var e=Object(u.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("./pkg/einsum_bg.wasm");case 2:p.a.render(s.a.createElement(he,null),document.getElementById("root"));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,n,t){e.exports=t(20)}},[[9,1,2]]]);
//# sourceMappingURL=main.89b79b44.chunk.js.map