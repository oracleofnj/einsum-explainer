(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){},18:function(e,n,t){},19:function(e,n,t){"use strict";t.r(n);var r,a,i=t(4),o=t.n(i),u=t(6),c=t(0),s=t.n(c),l=t(7),p=t.n(l),f=(t(16),t(3)),d=t(1),h={},m=0,y=new TextEncoder("utf-8"),v=null;function g(){return null!==v&&v.buffer===r.memory.buffer||(v=new Uint8Array(r.memory.buffer)),v}a="function"===typeof y.encodeInto?function(e){for(var n=e.length,t=r.__wbindgen_malloc(n),a=0;;){var i=g().subarray(t+a,t+n),o=y.encodeInto(e,i),u=o.read;if(a+=o.written,u===e.length)break;e=e.substring(u),t=r.__wbindgen_realloc(t,n,n+=3*e.length)}return m=a,t}:function(e){var n=y.encode(e),t=r.__wbindgen_malloc(n.length);return g().set(n,t),m=n.length,t};var b=new TextDecoder("utf-8");function w(e,n){return b.decode(g().subarray(e,e+n))}var _=null;function S(){return null===_&&(_=r.__wbindgen_global_argument_ptr()),_}var O=null;function E(){return null!==O&&O.buffer===r.memory.buffer||(O=new Uint32Array(r.memory.buffer)),O}function A(e){var n=a(e),t=m,i=S();try{r.validateAsJson(i,n,t);var o=E(),u=o[i/4],c=o[i/4+1],s=w(u,c).slice();return r.__wbindgen_free(u,1*c),s}finally{r.__wbindgen_free(n,1*t)}}function C(e,n){var t=a(e),i=m,o=a(n),u=m,c=S();try{r.validateAndSizeFromShapesAsStringAsJson(c,t,i,o,u);var s=E(),l=s[c/4],p=s[c/4+1],f=w(l,p).slice();return r.__wbindgen_free(l,1*p),f}finally{r.__wbindgen_free(t,1*i),r.__wbindgen_free(o,1*u)}}function J(e,n){var t=a(e),i=m,o=a(n),u=m,c=S();try{r.slowEinsumAsJson(c,t,i,o,u);var s=E(),l=s[c/4],p=s[c/4+1],f=w(l,p).slice();return r.__wbindgen_free(l,1*p),f}finally{r.__wbindgen_free(t,1*i),r.__wbindgen_free(o,1*u)}}h.validateAsJson=A,h.validateAndSizeFromShapesAsStringAsJson=C,h.slowEinsumAsJson=J;var k=new Array(32);k.fill(void 0),k.push(void 0,null,!0,!1);var N=k.length;h.__wbindgen_object_drop_ref=function(e){var n;(n=e)<36||(k[n]=N,N=n)};var j=function e(n){var t,a={"./einsum":h};if(n instanceof URL||"string"===typeof n||n instanceof Request){var i=fetch(n);t="function"===typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(i,a).catch(function(e){return console.warn("`WebAssembly.instantiateStreaming` failed. Assuming this is because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),i.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,a)})}):i.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,a)})}else t=WebAssembly.instantiate(n,a).then(function(e){return e instanceof WebAssembly.Instance?{instance:e,module:n}:e});return t.then(function(n){var t=n.instance,a=n.module;return r=t.exports,e.__wbindgen_wasm_module=a,r})};function x(e){return e.hasOwnProperty("Err")}function z(e){return e.hasOwnProperty("operand_indices")&&e.operand_indices instanceof Array&&e.hasOwnProperty("output_indices")&&e.hasOwnProperty("summation_indices")}function q(e){return e.hasOwnProperty("Ok")&&z(e.Ok)}function P(e){return e.hasOwnProperty("contraction")&&z(e.contraction)&&e.hasOwnProperty("output_size")&&function(e){return Object.entries(e).every(function(e){var n=Object(f.a)(e,2);return n[0],"number"===typeof n[1]})}(e.output_size)}function T(e){return x(e)||function(e){return e.hasOwnProperty("Ok")&&P(e.Ok)}(e)}var F=function(e){return"updateEquation"===e.type&&e.hasOwnProperty("equation")&&"string"===typeof e.equation},W={type:"updateEquation",typeguard:F,actionCreator:function(e){return{type:"updateEquation",equation:e}},reducer:function(e,n){if(F(n)){var t=n.equation,r=null,a=e.visibleSizes;try{q(r=JSON.parse(A(t)))&&(a=r.Ok.operand_indices.length)}catch(i){}return Object(d.a)({},e,{visibleSizes:a,equation:n.equation})}throw new TypeError(JSON.stringify({action:n}))}},I=t(2),M="updateShape";function B(e){return e.type===M&&e.hasOwnProperty("index")&&"number"===typeof e.index&&e.hasOwnProperty("shape")&&"string"===typeof e.shape}var R={type:M,typeguard:B,actionCreator:function(e,n){return{type:M,index:e,shape:n}},reducer:function(e,n){if(B(n)){var t=n.index,r=n.shape;return Object(d.a)({},e,{operandShapes:[].concat(Object(I.a)(e.operandShapes.slice(0,t)),[r],Object(I.a)(e.operandShapes.slice(t+1)))})}throw new TypeError(JSON.stringify({reducer:M,action:n}))}},U="updateContents";function L(e){return e.type===U&&e.hasOwnProperty("index")&&"number"===typeof e.index&&e.hasOwnProperty("contents")&&"string"===typeof e.contents}var $={type:U,typeguard:L,actionCreator:function(e,n){return{type:U,index:e,contents:n}},reducer:function(e,n){if(L(n)){var t=n.index,r=n.contents;return Object(d.a)({},e,{operandContents:[].concat(Object(I.a)(e.operandContents.slice(0,t)),[r],Object(I.a)(e.operandContents.slice(t+1)))})}throw new TypeError(JSON.stringify({reducer:U,action:n}))}},D=function(e){return"addShape"===e.type},H={type:"addShape",typeguard:D,actionCreator:function(){return{type:"addShape"}},reducer:function(e,n){if(D(n))return Object(d.a)({},e,{visibleSizes:e.visibleSizes+1});throw new TypeError(JSON.stringify({action:n}))}};function G(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===t)throw new Error("range: step must not be zero");void 0===n&&(n=e,e=0);for(var r=[],a=e;a<n;)r.push(a),a+=t;return r}var K={equation:"ij,jk->ik",visibleSizes:2,operandShapes:["[2,3]","[3,5]"],operandContents:[JSON.stringify(G(6)),JSON.stringify(G(0,150,10))]},Q={addShape:H.actionCreator,updateEquation:W.actionCreator,updateShape:R.actionCreator,updateContents:$.actionCreator},V=function(e){var n={};return e.forEach(function(e){if(n[e.type])throw new Error("Multiple declarations for ".concat(e.type));n[e.type]=e.reducer}),function(e,t){return n[t.type](e,t)}}([H,W,R,$]),X=function(e){var n=e.appState,t=e.dispatch,r=n.equation,a=n.visibleSizes,i=n.operandShapes.slice(0,a),o=n.operandContents.slice(0,a),u=function(e){return function(n){t(Q.updateShape(e,n.target.value))}},c=function(e){return function(n){t(Q.updateContents(e,n.target.value))}};return s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,s.a.createElement("button",{onClick:function(){t(Q.addShape())}},"Add Shape")),s.a.createElement("p",null,"Equation: ",s.a.createElement("input",{type:"text",onChange:function(e){t(Q.updateEquation(e.target.value))},value:r})),s.a.createElement("p",null,"There appear",a>1?"":"s"," to be ",a," input tensor",a>1?"s":""," in your equation."),G(a).map(function(e){return s.a.createElement("p",{key:e},s.a.createElement("div",null,"Shape of ",String.fromCharCode(e+"A".charCodeAt(0)),":"," ",s.a.createElement("input",{type:"text",onChange:u(e),value:"string"===typeof i[e]?i[e]:"[]"})),s.a.createElement("div",null,"Contents of ",String.fromCharCode(e+"A".charCodeAt(0)),":"," ",s.a.createElement("input",{type:"text",onChange:c(e),value:"string"===typeof o[e]?o[e]:"[]"})))}))},Y=t(8);t(17);var Z=function(e){var n="Out_{".concat(e.output_indices.join(","),"}"),t=e.summation_indices.map(function(e){return"\\sum_".concat(e)}).join(" "),r=e.operand_indices.map(function(e,n){var t="A".charCodeAt(0),r=String.fromCharCode(t+n),a=e.split("").join(",");return"".concat(r,"_{").concat(a,"}")}).join(" ");return"".concat(n," = ").concat(t," ").concat(r)},ee=function(e){var n,t,r,a,i=e.explanationJSON,o=JSON.parse(i);if(r=x(a=o)||q(a)?o:{Err:"validateAsJson returned an invalid response"},x(r))n=r.Err;else{var u=r.Ok,c=Z(u);t={__html:Object(Y.renderToString)(c)}}return x(r)?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"There was an error!"),s.a.createElement("p",null,n)):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Everything is cool!"),s.a.createElement("div",{dangerouslySetInnerHTML:t}))},ne=function(e){var n,t,r,a=e.sizedExplanationJSON,i=JSON.parse(a);return x(r=T(i)?i:{Err:"validateAndSizeFromShapesAsStringAsJson returned an invalid response"})?n=r.Err:t=JSON.stringify(r.Ok.output_size),x(r)?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"The sizes don't work!"),s.a.createElement("p",null,n)):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"The operands match the input and the sizes check out!"),s.a.createElement("div",null,"Output size: ",t))};function te(e){return e.replace(/[^\d,]/g," ").replace(/,\s*$/,"").split(",").map(function(e){return parseInt(e.trim(),10)})}function re(e,n){return function e(n,t){switch(n.length){case 0:return t[0];case 1:return t.slice();default:for(var r=[],a=1,i=1;i<n.length;i++)a*=n[i];for(var o=0;o<n[0];o++)r.push(e(n.slice(1),t.slice(o*a,(o+1)*a)));return r}}(e,n)}var ae=function(e){var n=e.appState,t=n.equation,r=n.visibleSizes,a=n.operandShapes.slice(0,r),i=n.operandContents.slice(0,r),o=A(t),u=C(t,JSON.stringify(a.map(te))),c=J(t,JSON.stringify(G(r).map(function(e){var n=[];try{n=JSON.parse(i[e]).flat(Math.pow(2,16))}catch(t){n=[]}return{shape:te(a[e]),contents:n}}))),l="Nope";try{var p=JSON.parse(c);l=p.Ok?JSON.stringify(re(p.Ok.shape,p.Ok.contents)):p.Err}catch(f){l="Nope"}return s.a.createElement(s.a.Fragment,null,s.a.createElement(ee,{explanationJSON:o}),s.a.createElement(ne,{sizedExplanationJSON:u}),l)},ie=(t(18),function(){var e=Object(c.useReducer)(V,K),n=Object(f.a)(e,2),t=n[0],r=n[1];return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement(X,{appState:t,dispatch:r}),s.a.createElement(ae,{appState:t})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));!function(){var e=Object(u.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("./pkg/einsum_bg.wasm");case 2:p.a.render(s.a.createElement(ie,null),document.getElementById("root"));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,n,t){e.exports=t(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.4cacdf8d.chunk.js.map