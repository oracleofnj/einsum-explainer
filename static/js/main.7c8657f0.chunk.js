(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,n,t){},18:function(e,n,t){},19:function(e,n,t){"use strict";t.r(n);var r,a,i=t(4),o=t.n(i),u=t(6),c=t(0),s=t.n(c),l=t(7),p=t.n(l),f=(t(16),t(3)),d=t(1),m={},h=0,y=new TextEncoder("utf-8"),v=null;function g(){return null!==v&&v.buffer===r.memory.buffer||(v=new Uint8Array(r.memory.buffer)),v}a="function"===typeof y.encodeInto?function(e){for(var n=e.length,t=r.__wbindgen_malloc(n),a=0;;){var i=g().subarray(t+a,t+n),o=y.encodeInto(e,i),u=o.read;if(a+=o.written,u===e.length)break;e=e.substring(u),t=r.__wbindgen_realloc(t,n,n+=3*e.length)}return h=a,t}:function(e){var n=y.encode(e),t=r.__wbindgen_malloc(n.length);return g().set(n,t),h=n.length,t};var w=new TextDecoder("utf-8");function b(e,n){return w.decode(g().subarray(e,e+n))}var E=null;function O(){return null===E&&(E=r.__wbindgen_global_argument_ptr()),E}var _=null;function S(){return null!==_&&_.buffer===r.memory.buffer||(_=new Uint32Array(r.memory.buffer)),_}function A(e){var n=a(e),t=h,i=O();try{r.validateAsJson(i,n,t);var o=S(),u=o[i/4],c=o[i/4+1],s=b(u,c).slice();return r.__wbindgen_free(u,1*c),s}finally{r.__wbindgen_free(n,1*t)}}function J(e,n){var t=a(e),i=h,o=a(n),u=h,c=O();try{r.validateAndSizeFromShapesAsStringAsJson(c,t,i,o,u);var s=S(),l=s[c/4],p=s[c/4+1],f=b(l,p).slice();return r.__wbindgen_free(l,1*p),f}finally{r.__wbindgen_free(t,1*i),r.__wbindgen_free(o,1*u)}}function C(e,n){var t=a(e),i=h,o=a(n),u=h,c=O();try{r.slowEinsumAsJson(c,t,i,o,u);var s=S(),l=s[c/4],p=s[c/4+1],f=b(l,p).slice();return r.__wbindgen_free(l,1*p),f}finally{r.__wbindgen_free(t,1*i),r.__wbindgen_free(o,1*u)}}m.validateAsJson=A,m.validateAndSizeFromShapesAsStringAsJson=J,m.slowEinsumAsJson=C;var k=new Array(32);k.fill(void 0),k.push(void 0,null,!0,!1);var N=k.length;m.__wbindgen_object_drop_ref=function(e){var n;(n=e)<36||(k[n]=N,N=n)};var j=function e(n){var t,a={"./einsum":m};if(n instanceof URL||"string"===typeof n||n instanceof Request){var i=fetch(n);t="function"===typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(i,a).catch(function(e){return console.warn("`WebAssembly.instantiateStreaming` failed. Assuming this is because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),i.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,a)})}):i.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,a)})}else t=WebAssembly.instantiate(n,a).then(function(e){return e instanceof WebAssembly.Instance?{instance:e,module:n}:e});return t.then(function(n){var t=n.instance,a=n.module;return r=t.exports,e.__wbindgen_wasm_module=a,r})};function x(e){return e.hasOwnProperty("Err")}function z(e){return e.hasOwnProperty("operand_indices")&&e.operand_indices instanceof Array&&e.hasOwnProperty("output_indices")&&e.hasOwnProperty("summation_indices")}function q(e){return e.hasOwnProperty("Ok")&&z(e.Ok)}function P(e){return e.hasOwnProperty("contraction")&&z(e.contraction)&&e.hasOwnProperty("output_size")&&function(e){return Object.entries(e).every(function(e){var n=Object(f.a)(e,2);return n[0],"number"===typeof n[1]})}(e.output_size)}function F(e){return x(e)||function(e){return e.hasOwnProperty("Ok")&&P(e.Ok)}(e)}function T(e){return e.hasOwnProperty("Ok")&&function(e){return e.hasOwnProperty("shape")&&e.shape instanceof Array&&e.shape.every(function(e){return"number"===typeof e})&&e.hasOwnProperty("contents")&&e.contents instanceof Array&&e.contents.every(function(e){return"number"===typeof e})}(e.Ok)}var W=function(e){return"updateEquation"===e.type&&e.hasOwnProperty("equation")&&"string"===typeof e.equation},I={type:"updateEquation",typeguard:W,actionCreator:function(e){return{type:"updateEquation",equation:e}},reducer:function(e,n){if(W(n)){var t=n.equation,r=null,a=e.visibleSizes;try{q(r=JSON.parse(A(t)))&&(a=r.Ok.operand_indices.length)}catch(i){}return Object(d.a)({},e,{visibleSizes:a,equation:n.equation})}throw new TypeError(JSON.stringify({action:n}))}},B=t(2),M="updateShape";function R(e){return e.type===M&&e.hasOwnProperty("index")&&"number"===typeof e.index&&e.hasOwnProperty("shape")&&"string"===typeof e.shape}var U={type:M,typeguard:R,actionCreator:function(e,n){return{type:M,index:e,shape:n}},reducer:function(e,n){if(R(n)){var t=n.index,r=n.shape;return Object(d.a)({},e,{operandShapes:[].concat(Object(B.a)(e.operandShapes.slice(0,t)),[r],Object(B.a)(e.operandShapes.slice(t+1)))})}throw new TypeError(JSON.stringify({reducer:M,action:n}))}},L="updateContents";function $(e){return e.type===L&&e.hasOwnProperty("index")&&"number"===typeof e.index&&e.hasOwnProperty("contents")&&"string"===typeof e.contents}var D={type:L,typeguard:$,actionCreator:function(e,n){return{type:L,index:e,contents:n}},reducer:function(e,n){if($(n)){var t=n.index,r=n.contents;return Object(d.a)({},e,{operandContents:[].concat(Object(B.a)(e.operandContents.slice(0,t)),[r],Object(B.a)(e.operandContents.slice(t+1)))})}throw new TypeError(JSON.stringify({reducer:L,action:n}))}},H=function(e){return"addShape"===e.type},Y={type:"addShape",typeguard:H,actionCreator:function(){return{type:"addShape"}},reducer:function(e,n){if(H(n))return Object(d.a)({},e,{visibleSizes:e.visibleSizes+1});throw new TypeError(JSON.stringify({action:n}))}};function G(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===t)throw new Error("range: step must not be zero");void 0===n&&(n=e,e=0);for(var r=[],a=e;a<n;)r.push(a),a+=t;return r}var K={equation:"ij,jk->ik",visibleSizes:2,operandShapes:["[2,3]","[3,5]"],operandContents:[JSON.stringify(G(6)),JSON.stringify(G(0,150,10))]},Q={addShape:Y.actionCreator,updateEquation:I.actionCreator,updateShape:U.actionCreator,updateContents:D.actionCreator},V=function(e){var n={};return e.forEach(function(e){if(n[e.type])throw new Error("Multiple declarations for ".concat(e.type));n[e.type]=e.reducer}),function(e,t){return n[t.type](e,t)}}([Y,I,U,D]),X=function(e){var n=e.appState,t=e.dispatch,r=n.equation,a=n.visibleSizes,i=n.operandShapes.slice(0,a),o=n.operandContents.slice(0,a),u=function(e){return function(n){t(Q.updateShape(e,n.target.value))}},c=function(e){return function(n){t(Q.updateContents(e,n.target.value))}};return s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Equation: ",s.a.createElement("input",{type:"text",onChange:function(e){t(Q.updateEquation(e.target.value))},value:r})),G(a).map(function(e){return s.a.createElement("p",{key:e},s.a.createElement("span",null,"Shape of ",String.fromCharCode(e+"A".charCodeAt(0)),":"," ",s.a.createElement("input",{type:"text",onChange:u(e),value:"string"===typeof i[e]?i[e]:"[]"})),s.a.createElement("span",null,"Contents of ",String.fromCharCode(e+"A".charCodeAt(0)),":"," ",s.a.createElement("input",{type:"text",onChange:c(e),value:"string"===typeof o[e]?o[e]:"[]"})))}))},Z=t(8);t(17);var ee=function(e){var n="Out_{".concat(e.output_indices.join(","),"}"),t=e.summation_indices.map(function(e){return"\\sum_".concat(e)}).join(" "),r=e.operand_indices.map(function(e,n){var t="A".charCodeAt(0),r=String.fromCharCode(t+n),a=e.split("").join(",");return"".concat(r,"_{").concat(a,"}")}).join(" ");return"".concat(n," = ").concat(t," ").concat(r)},ne=function(e){var n,t,r,a,i=e.explanationJSON,o=JSON.parse(i);if(r=x(a=o)||q(a)?o:{Err:"validateAsJson returned an invalid response"},x(r))n=r.Err;else{var u=r.Ok,c=ee(u);t={__html:Object(Z.renderToString)(c)}}return x(r)?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"There was an error!"),s.a.createElement("p",null,n)):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Everything is cool!"),s.a.createElement("div",{dangerouslySetInnerHTML:t}))},te=function(e){var n,t,r,a=e.sizedExplanationJSON,i=JSON.parse(a);return x(r=F(i)?i:{Err:"validateAndSizeFromShapesAsStringAsJson returned an invalid response"})?n=r.Err:t=JSON.stringify(r.Ok.output_size),x(r)?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"The sizes don't work!"),s.a.createElement("p",null,n)):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"The operands match the input and the sizes check out!"),s.a.createElement("div",null,"Output size: ",t))};function re(e){return e.replace(/[^\d,]/g," ").replace(/,\s*$/,"").split(",").map(function(e){return parseInt(e.trim(),10)})}function ae(e){return function e(n,t){switch(n.length){case 0:return t[0];case 1:return t.slice();default:for(var r=[],a=1,i=1;i<n.length;i++)a*=n[i];for(var o=0;o<n[0];o++)r.push(e(n.slice(1),t.slice(o*a,(o+1)*a)));return r}}(e.shape,e.contents)}var ie=function(e){var n,t,r,a,i=e.computationOutputJSON,o=JSON.parse(i);return r=x(a=o)||T(a)?o:{Err:"slowEinsumAsJson returned an invalid response"},x(r)?n=r.Err:t=JSON.stringify(ae(r.Ok)),x(r)?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Something went wrong!"),s.a.createElement("div",null,n)):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",null,"Your computation is valid!"),s.a.createElement("div",null,"Einsum Result: ",t))},oe=function(e){var n=e.appState,t=n.equation,r=n.visibleSizes,a=n.operandShapes.slice(0,r),i=n.operandContents.slice(0,r),o=A(t),u=J(t,JSON.stringify(a.map(re))),c=C(t,JSON.stringify(G(r).map(function(e){return{shape:re(a[e]),contents:re(i[e])}})));return s.a.createElement(s.a.Fragment,null,s.a.createElement(ne,{explanationJSON:o}),s.a.createElement(te,{sizedExplanationJSON:u}),s.a.createElement(ie,{computationOutputJSON:c}))},ue=(t(18),function(){var e=Object(c.useReducer)(V,K),n=Object(f.a)(e,2),t=n[0],r=n[1];return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement(X,{appState:t,dispatch:r}),s.a.createElement(oe,{appState:t})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));!function(){var e=Object(u.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("./pkg/einsum_bg.wasm");case 2:p.a.render(s.a.createElement(ue,null),document.getElementById("root"));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},9:function(e,n,t){e.exports=t(19)}},[[9,1,2]]]);
//# sourceMappingURL=main.7c8657f0.chunk.js.map