(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(29)},20:function(e,n,t){},27:function(e,n,t){},29:function(e,n,t){"use strict";t.r(n);var r,a,o=t(6),i=t.n(o),c=t(11),u=t(0),s=t.n(u),l=t(12),p=t.n(l),f=(t(20),t(5)),d=t(3),m={},h=0,v=new TextEncoder("utf-8"),y=null;function g(){return null!==y&&y.buffer===r.memory.buffer||(y=new Uint8Array(r.memory.buffer)),y}a="function"===typeof v.encodeInto?function(e){for(var n=e.length,t=r.__wbindgen_malloc(n),a=0;;){var o=g().subarray(t+a,t+n),i=v.encodeInto(e,o),c=i.read;if(a+=i.written,c===e.length)break;e=e.substring(c),t=r.__wbindgen_realloc(t,n,n+=3*e.length)}return h=a,t}:function(e){var n=v.encode(e),t=r.__wbindgen_malloc(n.length);return g().set(n,t),h=n.length,t};var b=new TextDecoder("utf-8");function O(e,n){return b.decode(g().subarray(e,e+n))}var w=null;function S(){return null===w&&(w=r.__wbindgen_global_argument_ptr()),w}var E=null;function _(){return null!==E&&E.buffer===r.memory.buffer||(E=new Uint32Array(r.memory.buffer)),E}function A(e){var n=a(e),t=h,o=S();try{r.validateAsJson(o,n,t);var i=_(),c=i[o/4],u=i[o/4+1],s=O(c,u).slice();return r.__wbindgen_free(c,1*u),s}finally{r.__wbindgen_free(n,1*t)}}function N(e,n){var t=a(e),o=h,i=a(n),c=h,u=S();try{r.validateAndSizeFromShapesAsStringAsJson(u,t,o,i,c);var s=_(),l=s[u/4],p=s[u/4+1],f=O(l,p).slice();return r.__wbindgen_free(l,1*p),f}finally{r.__wbindgen_free(t,1*o),r.__wbindgen_free(i,1*c)}}function k(e,n){var t=a(e),o=h,i=a(n),c=h,u=S();try{r.slowEinsumAsJson(u,t,o,i,c);var s=_(),l=s[u/4],p=s[u/4+1],f=O(l,p).slice();return r.__wbindgen_free(l,1*p),f}finally{r.__wbindgen_free(t,1*o),r.__wbindgen_free(i,1*c)}}m.validateAsJson=A,m.validateAndSizeFromShapesAsStringAsJson=N,m.slowEinsumAsJson=k;var J=new Array(32);J.fill(void 0),J.push(void 0,null,!0,!1);var C=J.length;m.__wbindgen_object_drop_ref=function(e){var n;(n=e)<36||(J[n]=C,C=n)};var j=function e(n){var t,a={"./einsum":m};if(n instanceof URL||"string"===typeof n||n instanceof Request){var o=fetch(n);t="function"===typeof WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(o,a).catch(function(e){return console.warn("`WebAssembly.instantiateStreaming` failed. Assuming this is because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e),o.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,a)})}):o.then(function(e){return e.arrayBuffer()}).then(function(e){return WebAssembly.instantiate(e,a)})}else t=WebAssembly.instantiate(n,a).then(function(e){return e instanceof WebAssembly.Instance?{instance:e,module:n}:e});return t.then(function(n){var t=n.instance,a=n.module;return r=t.exports,e.__wbindgen_wasm_module=a,r})},x=t(2);function z(e){return e.hasOwnProperty("Err")}function q(e){return e instanceof Array&&e.every(function(e){return"number"===typeof e})}function P(e){if("number"===typeof e)return{Ok:[]};var n=P(e[0]);if(z(n))return n;for(var t=function(t){var r=P(e[t]);return z(r)?{v:r}:n.Ok.every(function(e,n){return r.Ok[n]===e})?void 0:{v:{Err:"Array contains elements with different shapes"}}},r=1;r<e.length;r++){var a=t(r);if("object"===typeof a)return a.v}return{Ok:[e.length].concat(Object(x.a)(n.Ok))}}function T(e){return!!function e(n){if("number"===typeof n)return!0;if(!(n instanceof Array))return!1;if(q(n)&&0!==n.length)return!0;var t=n[0];if(!(t instanceof Array)||0===t.length)return!1;var r=t.length;return 0!==r&&n.every(function(n){return n instanceof Array&&n.length===r&&e(n)})}(e)&&!z(P(e))}function W(e){return e.hasOwnProperty("operand_indices")&&e.operand_indices instanceof Array&&e.hasOwnProperty("output_indices")&&e.hasOwnProperty("summation_indices")}function F(e){return e.hasOwnProperty("contraction")&&W(e.contraction)&&e.hasOwnProperty("output_size")&&function(e){return Object.entries(e).every(function(e){var n=Object(f.a)(e,2);return n[0],"number"===typeof n[1]})}(e.output_size)}function M(e){return e.hasOwnProperty("shape")&&q(e.shape)&&e.hasOwnProperty("contents")&&q(e.contents)}function I(e,n,t){var r;try{r=JSON.parse(e)}catch(a){return{Err:"".concat(t," returned invalid JSON")}}return function(e,n,t){return function(e,n){return e.hasOwnProperty("Ok")&&n(e.Ok)}(e,n)?e:z(e)?e:t}(r,n,{Err:"".concat(t," returned valid JSON but of the wrong type")})}var B=function(e){return"updateEquation"===e.type&&e.hasOwnProperty("equation")&&"string"===typeof e.equation},V={type:"updateEquation",typeguard:B,actionCreator:function(e){return{type:"updateEquation",equation:e}},reducer:function(e,n){if(B(n)){var t=n.equation,r=e.visibleSizes,a=I(A(t),W,"validateAsJson");return z(a)||(r=a.Ok.operand_indices.length),Object(d.a)({},e,{visibleSizes:r,equation:n.equation})}throw new TypeError(JSON.stringify({action:n}))}};function R(e){var n,t=e.replace(/\(/g,"[").replace(/\)/g,"]");try{n=JSON.parse(t)}catch(r){return{Err:"Not a valid shape"}}return q(n)?{Ok:n}:{Err:"Not a valid shape"}}function U(e){return function e(n,t){switch(n.length){case 0:return t[0];case 1:return t.slice();default:for(var r=[],a=1,o=1;o<n.length;o++)a*=n[o];for(var i=0;i<n[0];i++)r.push(e(n.slice(1),t.slice(i*a,(i+1)*a)));return r}}(e.shape,e.contents)}var L="updateShape";function D(e){return e.type===L&&e.hasOwnProperty("index")&&"number"===typeof e.index&&e.hasOwnProperty("shape")&&"string"===typeof e.shape}var H={type:L,typeguard:D,actionCreator:function(e,n){return{type:L,index:e,shape:n}},reducer:function(e,n){if(D(n)){var t=n.index,r=n.shape,a=R(r);if(z(a))return Object(d.a)({},e,{operandShapes:[].concat(Object(x.a)(e.operandShapes.slice(0,t)),[r],Object(x.a)(e.operandShapes.slice(t+1)))});var o=function(e,n,t){var r=1,a=!0,o=!1,i=void 0;try{for(var c,u=t[Symbol.iterator]();!(a=(c=u.next()).done);a=!0)r*=c.value}catch(f){o=!0,i=f}finally{try{a||null==u.return||u.return()}finally{if(o)throw i}}var s=e[n];if(!(s instanceof Array))return Array(r).fill(0);for(var l=[],p=0;p<r;p++)"number"!==typeof s[p]?l.push(0):l.push(s[p]);return l}(e.operandVectors,t,a.Ok),i=U({shape:a.Ok,contents:o});return Object(d.a)({},e,{operandContents:[].concat(Object(x.a)(e.operandContents.slice(0,t)),[JSON.stringify(i)],Object(x.a)(e.operandContents.slice(t+1))),operandShapes:[].concat(Object(x.a)(e.operandShapes.slice(0,t)),[r],Object(x.a)(e.operandShapes.slice(t+1)))})}throw new TypeError(JSON.stringify({reducer:L,action:n}))}};function $(e){var n,t=e.replace(/\(/g,"[").replace(/\)/g,"]");try{n=JSON.parse(t)}catch(r){return{Err:"Not a valid ndArray"}}return T(n)?{Ok:n}:{Err:"Not a valid ndArray"}}var G="updateContents";function K(e){return e.type===G&&e.hasOwnProperty("index")&&"number"===typeof e.index&&e.hasOwnProperty("contents")&&"string"===typeof e.contents}var Q={type:G,typeguard:K,actionCreator:function(e,n){return{type:G,index:e,contents:n}},reducer:function(e,n){if(K(n)){var t=n.index,r=n.contents,a=$(r);if(z(a))return Object(d.a)({},e,{operandContents:[].concat(Object(x.a)(e.operandContents.slice(0,t)),[r],Object(x.a)(e.operandContents.slice(t+1)))});var o=P(a.Ok);if(z(o))throw new Error("This shouldn't be possible");return Object(d.a)({},e,{operandContents:[].concat(Object(x.a)(e.operandContents.slice(0,t)),[r],Object(x.a)(e.operandContents.slice(t+1))),operandShapes:[].concat(Object(x.a)(e.operandShapes.slice(0,t)),[JSON.stringify(o.Ok).replace(/\[/g,"(").replace(/\]/g,")")],Object(x.a)(e.operandShapes.slice(t+1))),operandVectors:[].concat(Object(x.a)(e.operandVectors.slice(0,t)),[a.Ok.flat(Math.pow(2,16))],Object(x.a)(e.operandVectors.slice(t+1)))})}throw new TypeError(JSON.stringify({reducer:G,action:n}))}},X=function(e){return"addShape"===e.type},Y={type:"addShape",typeguard:X,actionCreator:function(){return{type:"addShape"}},reducer:function(e,n){if(X(n))return Object(d.a)({},e,{visibleSizes:e.visibleSizes+1});throw new TypeError(JSON.stringify({action:n}))}};function Z(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===t)throw new Error("range: step must not be zero");void 0===n&&(n=e,e=0);for(var r=[],a=e;a<n;)r.push(a),a+=t;return r}var ee={equation:"ij,jk->ik",visibleSizes:2,operandShapes:["(2,3)","(3,5)"].concat(Array(254).fill("()")),operandContents:[JSON.stringify([Z(3),Z(3,6)]),JSON.stringify([Z(0,50,10),Z(50,100,10),Z(100,150,10)])].concat(Array(254).fill("[]")),operandVectors:[Z(6),Z(0,150,10)].concat(Array(254).fill([]))},ne={addShape:Y.actionCreator,updateEquation:V.actionCreator,updateShape:H.actionCreator,updateContents:Q.actionCreator},te=function(e){var n={};return e.forEach(function(e){if(n[e.type])throw new Error("Multiple declarations for ".concat(e.type));n[e.type]=e.reducer}),function(e,t){return n[t.type](e,t)}}([Y,V,H,Q]);function re(e){var n=e.prompt,t=e.control;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-4 col-lg-3"},n),s.a.createElement("div",{className:"col-xs-7 col-lg-9"},t))}var ae=s.a.memo(function(e){var n=e.equation,t=e.dispatch;return s.a.createElement(re,{prompt:"Equation:",control:s.a.createElement("input",{type:"text",onChange:function(e){t(ne.updateEquation(e.target.value))},value:n})})}),oe=t(13);t(21);var ie=function(e){var n="Out_{".concat(e.output_indices.join(","),"}"),t=e.summation_indices.map(function(e){return"\\sum_".concat(e)}).join(" "),r=e.operand_indices.map(function(e,n){var t="A".charCodeAt(0),r=String.fromCharCode(t+n),a=e.split("").join(",");return"".concat(r,"_{").concat(a,"}")}).join(" ");return"".concat(n," = ").concat(t," ").concat(r)},ce=t(7),ue=t(9);function se(e){var n=e.output;return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-xs-2 col-xs-offset-2 col-md-offset-0 col-md-1"},z(n)?s.a.createElement(ce.a,{title:"Something went wrong!",icon:ue.b,size:"2x",color:"orangered"}):s.a.createElement(ce.a,{title:"Everything is cool!",icon:ue.a,size:"2x",color:"darkgreen"})),s.a.createElement("div",{className:"col-xs-8 col-md-11"},z(n)?n.Err:n.Ok))}var le=s.a.memo(function(e){var n=I(e.explanationJSON,W,"validateAsJson"),t=z(n)?n:{Ok:s.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(oe.renderToString)(ie(n.Ok))}})};return s.a.createElement(se,{output:t})});function pe(e){var n=e.input,t=e.output;return s.a.createElement("div",{className:"row",style:{paddingTop:"1em",paddingBottom:"1em"}},s.a.createElement("div",{className:"col-xs-12 col-md-6"},n),s.a.createElement("div",{className:"col-xs-12 col-md-6"},t))}var fe=s.a.memo(function(e){var n=e.equation,t=e.dispatch,r=A(n);return s.a.createElement(pe,{input:s.a.createElement(ae,{equation:n,dispatch:t}),output:s.a.createElement(le,{explanationJSON:r})})}),de=s.a.memo(function(e){var n,t=e.equationJSON,r=e.sizedExplanationJSON,a=I(t,W,"validateAsJson"),o=I(r,F,"validateAndSizeFromShapesAsStringAsJson");if(z(o))n=o;else if(z(a))n=a;else{var i=a.Ok,c=o.Ok.output_size;n={Ok:s.a.createElement("div",null,s.a.createElement("div",null,"Output size: [",i.output_indices.join(", "),"] ="," ",JSON.stringify(i.output_indices.map(function(e){return c[e]}))),s.a.createElement("div",null,"Summation index lengths:"," ",i.summation_indices.map(function(e){return"".concat(e,": ").concat(c[e])}).join("; ")))}}return s.a.createElement(se,{output:n})}),me=s.a.memo(function(e){for(var n=e.operandShapes,t=e.visibleSizes,r=e.dispatch,a=[],o=0;o<t;o++)a.push(o<n.length?n[o]:"[]");var i=function(e){return function(n){r(ne.updateShape(e,n.target.value))}};return s.a.createElement(s.a.Fragment,null,a.map(function(e,n){return s.a.createElement(re,{key:n,prompt:"Shape of ".concat(String.fromCharCode(n+"A".charCodeAt(0)),":"),control:s.a.createElement("input",{type:"text",onChange:i(n),value:e})})}))}),he=s.a.memo(function(e){var n,t=e.equation,r=e.visibleSizes,a=e.operandShapes,o=e.dispatch,i=A(t),c=a.slice(0,r).map(R);return n=c.some(z)?JSON.stringify({Err:JSON.stringify(c.map(function(e,n){return{val:e,idx:n}}).filter(function(e){return z(e.val)}).map(function(e){var n=e.val;return{Tensor:e.idx,Error:n.Err}}))}):N(t,JSON.stringify(c.map(function(e){return e.Ok}))),s.a.createElement(pe,{input:s.a.createElement(me,{dispatch:o,visibleSizes:r,operandShapes:a}),output:s.a.createElement(de,{sizedExplanationJSON:n,equationJSON:i})})}),ve=s.a.memo(function(e){var n=I(e.computationOutputJSON,M,"slowEinsumAsJson"),t=z(n)?n:{Ok:s.a.createElement(s.a.Fragment,null,"Einsum Result:"," ",s.a.createElement("div",null,JSON.stringify(U(n.Ok),null,2)))};return s.a.createElement(se,{output:t})}),ye=s.a.memo(function(e){for(var n=e.operandContents,t=e.visibleSizes,r=e.dispatch,a=[],o=0;o<t;o++)a.push(o<n.length?n[o]:"[]");var i=function(e){return function(n){r(ne.updateContents(e,n.target.value))}};return s.a.createElement(s.a.Fragment,null,a.map(function(e,n){return s.a.createElement(re,{prompt:"Contents of ".concat(String.fromCharCode(n+"A".charCodeAt(0)),":"),control:s.a.createElement("input",{type:"text",onChange:i(n),value:e})})}))}),ge=s.a.memo(function(e){for(var n=e.equation,t=e.visibleSizes,r=e.operandShapes,a=e.operandContents,o=e.dispatch,i=r.slice(0,t),c=a.slice(0,t),u=[],l=0;l<Math.min(i.length,c.length);l++){var p=R(i[l]),f=$(c[l]);z(p)||z(f)||"number"===typeof f.Ok?u.push({Err:"Array ".concat(l," doesn't work")}):u.push({shape:p.Ok,contents:f.Ok.flat(Math.pow(2,16))})}var d=k(n,JSON.stringify(u));return s.a.createElement(pe,{input:s.a.createElement(ye,{dispatch:o,visibleSizes:t,operandContents:a}),output:s.a.createElement(ve,{computationOutputJSON:d})})}),be=(t(27),t(28),function(){var e=Object(u.useReducer)(te,ee),n=Object(f.a)(e,2),t=n[0],r=n[1],a=t.equation,o=t.visibleSizes,i=t.operandContents,c=t.operandShapes;return s.a.createElement("div",{className:"wrap container-fluid"},s.a.createElement(fe,{equation:a,dispatch:r}),s.a.createElement(he,{equation:a,dispatch:r,visibleSizes:o,operandShapes:c}),s.a.createElement(ge,{equation:a,dispatch:r,visibleSizes:o,operandContents:i,operandShapes:c}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));!function(){var e=Object(c.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j("./pkg/einsum_bg.wasm");case 2:p.a.render(s.a.createElement(be,null),document.getElementById("root"));case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[14,1,2]]]);
//# sourceMappingURL=main.9833a4fc.chunk.js.map